{% extends '_base.html' %}
{% load crispy_forms_tags %}
{% load cloudinary %}
{% block extra_title %}{{ album.title }}{% endblock extra_title %}

{% block content %}
<div id="assets" class="container">
    <h1>{{ album.title }}</h1>
    <div class="col-12 col-sm-6 col-lg-3 asset">
        {% for asset in assets %}
        {{ asset.title }}
        <img class="w-100" src="{{ asset.media.url }}" alt="{{ asset.title }}">
        {{ asset.description }}
    </div>
    {% empty %}
    <p>This album is currently empty.</p>
    {% endfor %}
    {% if asset %}
    <h2>Your media has been added.</h2>
    {% else %}
    <!-- button for asset modal -->
    <button id="addMediaBtn" type="button" class="btn btn-outline-info" data-toggle="modal" data-target=".add-media"><i
            class="fas fa-photo-video"></i>
    </button>

    {% endif %}

    <!-- add media modal -->
    <div class="row mt-3">
        <div class="col">
            <div class="modal fade add-media" tabindex="1" role="dialog" aria-labelledby="AddMedia" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="container p-2">
                            <a href="{% url 'albums:album-detail' %}" class="mb-3 btn btn-outline-danger cancel"
                                type="submit"><i class="far fa-window-close"></i></a>
                            <div class="asset-form">
                                <h3>Add Media</h3>
                                <form action="{% url 'albums:album-detail' %}" method="post">
                                    {% csrf_token %}
                                    {{ asset_form|crispy }}
                                    <button class="btn btn-success btn-sm" type="submit"><i
                                            class="fas fa-cloud-upload-alt"></button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row bt-5"></div>
</div>

{% endblock content %}

<h3>Add Media</h3>
<form action="{% url 'albums:album-detail' %}" method="post">
    {% csrf_token %}
    {{ asset_form|crispy }}
    <button class="btn btn-success btn-sm" type="submit"><i class="fas fa-cloud-upload-alt"></button>
</form>